# High Performance Thermocouple Amplifier

## Design Goals and Specifications for High-Speed Isolated Thermocouple Project

### Calibration and Temperature Considerations
- Calibration techniques will rely on physical phenomena, like boiling points, but must account for atmospheric pressure variations, as these can affect the boiling points. 
    - Particularly relevant for calibration at different elevations above sea level.
- A proposal to use distilled water for calibration to achieve "close enough" results within a +/-0.1°C margin at a 100°C range was discussed but noted to have limitations based on elevation and atmospheric conditions.
- An alternative calibration method involving triple-point thermal references was suggested for precision but recognized as less accessible.

### Thermocouple and Amplifier Specifications
- The project will initially focus on Type K thermocouples.
- The analog front-end amplifier should have an input-offset less than 4μV. Noise, drift, and linearity, along with not loading the thermocouple, are primary concerns.
- The aim is for the thermocouple to have no more than 10 microamps of loading current, preferably less than 1.5 microamps.
- Microcontroller Unit (MCU) specifications include at least 16KB flash to accommodate future expansions like a Look-Up Table (LUT) for better matching to the exact thermocouple curve.

### Design and Integration
- The discussion covered different approaches to integrating the components, emphasizing the importance of a high input impedance for accurate measurements.
- A digital temperature sensor for ambient temperature measurement at the thermocouple connection point on the board was considered crucial for relative measurements.
- There was a significant focus on selecting the right connectors and ensuring compatibility with different thermocouples, as well as considering built-in cold-compensation sensors.

### Component Selection and Cost Considerations
- Efforts to minimize costs while maintaining performance were evident, with discussions around sourcing components, choosing MCUs with built-in DACs, and finding economical PCB manufacturing options.
- The Bill of Materials (BOM) cost estimation hovered around $25-$30, with additional costs for PCB manufacturing and shipping considered. The aim is to keep the total cost reasonable while enabling scalability in manufacturing.

### Calibration and Output Accuracy
- There were suggestions for making the linear approximation of temperature readings accurate within specific high-temperature ranges (900°C to 1100°C), acknowledging that errors at lower temperatures would be less critical.
- Digital outputs and possibly eliminating analog outputs were discussed to streamline the design and reduce complexity.

### PCB Design and Manufacturing
- Advanced PCB design techniques were considered to accommodate tight space requirements and high-resolution traces, specifically for components like QFN packages with exposed pads.
- The possibility of integrating a designated type K thermocouple socket was discussed, noting its impact on the BOM cost but its importance for compatibility and ease of use.

### Additional Notes
- The team explored various ideas for enhancing the project's design, such as integrating temperature sensors directly on the PCB for more accurate cold-junction compensation and discussing the practical aspects of assembling small components without professional equipment.
- There was a continuous emphasis on balancing performance, cost, and usability to ensure that the final product would be accessible and useful to a broad audience.

## Technical Dissemination

### 1. Power Supply and Isolation

#### Components:
- **U3 (H11L1)**: 
- **U4, U5 (AP2112K-3.3)**: Optocoupler and 3.3V low dropout regulators. Provide isolated stable voltage for the circuit.
- **D1 (Schottky Diode)**: Reverse polarity protection.
- **L1 (Coupled Inductor)**: Provides isolation and filtering for the power supply.
- **C1, C2, C3, C4, C5, C6, C7, C8, C9, C10, C11, C12**: Capacitors for filtering and decoupling.
- **D2 (Zener Diode)**: Overvoltage protection.
- **R1, R2, R3, R4**: Current limiting and voltage division resistors.

#### Description:
This section ensures a stable and isolated 3.3V power supply for both the main and isolated parts of the circuit. The Schottky diode prevents damage from reverse polarity. The coupled inductor and capacitors provide isolation and reduce noise, ensuring clean power delivery. The Zener diode protects against overvoltage conditions.

---

### 2. Thermocouple Input and Amplification

#### Components:
- **U6A (IS1221)**: Instrumentation amplifier for thermocouple signal amplification.
- **R5, R6, R7**: Precision resistors for setting amplifier gain.
- **C13, C14, C15, C16, C17, C18, C19**: Filtering capacitors.
- **R8 (Trim-Pot)**: Adjustable resistor for fine-tuning gain.

#### Description:
This section amplifies the small voltage generated by the Type K thermocouple. The instrumentation amplifier is chosen for its low offset voltage and high input impedance. Precision resistors set the gain, while capacitors filter out noise. The adjustable resistor allows for fine-tuning of the amplifier gain.

---

### 3. Analog-to-Digital Conversion

#### Components:
- **U7 (MCP1501T-20E)**: Precision voltage reference.
- **U2 (MCP3565R)**: High-resolution ADC.
- **C20, C21, C22, C23, C24, C25, C26, C27, C28, C29, C30**: Decoupling and filtering capacitors.
- **R9, R10, R11, R12, R13, R14, R15, R16, R17**: Resistors for setting input impedance and filtering.

#### Description:
The amplified thermocouple signal is converted to a digital format by the high-resolution ADC. The precision voltage reference ensures stable and accurate conversion. Capacitors filter the power supply and signal lines to minimize noise and improve accuracy.

---

### 4. Microcontroller and Interface

### Components:
- **U1 (MSPM0G1507SPTR)**: Microcontroller for processing digital signals and handling communication.
- **C31, C32, C33, C34, C35, C36**: Decoupling capacitors for MCU power supply.
- **R18, R19, R20**: Resistors for setting up MCU I/O lines.

#### Description:
The MCU processes the digital signals from the ADC and manages communication with external devices. It features sufficient flash memory to accommodate future expansions, such as a Look-Up Table (LUT) for thermocouple curve matching. Decoupling capacitors stabilize the power supply to the MCU.

---

### 5. Temperature Sensor for Cold-Junction Compensation

### Components:
- **U10 (TMP112)**: Digital temperature sensor.
- **R21, R22**: Pull-up resistors for I2C lines.
- **C37, C38**: Decoupling capacitors.

#### Description:
This section measures the ambient temperature at the thermocouple connection point, crucial for cold-junction compensation. The digital temperature sensor communicates with the MCU via I2C, with pull-up resistors ensuring reliable communication. Decoupling capacitors provide power supply stability.

---

### 6. Isolation and Data Communication

#### Components:
- **ISO-MISO, ISO-MOSI**: Isolated SPI lines.
- **ISO6721RB**: Digital isolator.
- **C39, C40, C41**: Filtering capacitors.

#### Description:
Isolated SPI lines facilitate safe communication between the ADC and MCU, preventing ground loop issues and ensuring signal integrity. The digital isolator provides galvanic isolation, protecting sensitive components from potential high-voltage spikes. Filtering capacitors minimize noise on the communication lines.